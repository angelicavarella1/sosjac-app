import{_ as c,c as a,a as e,i as g,t as s,n as m,d as l,g as u,o as i}from"./index-Bqm-g8iD.js";const f={data(){return{report:null}},async mounted(){const o=await this.getCurrentUser();if(!o)return this.$router.push("/login");const t=this.$route.params.id,{data:n,error:d}=await u.from("denuncia").select("*").eq("id",t).single();if(d){alert("Erro ao carregar denúncia.");return}const r=await this.checkIfAdmin(o.email);if(n.email_usuario!==o.email&&!r){alert("Acesso negado. Você não tem permissão para ver esta denúncia."),this.$router.push("/home");return}this.report=n},methods:{async getCurrentUser(){const{data:o}=await u.auth.getUser();return o.user},async checkIfAdmin(o){const{data:t,error:n}=await u.from("admins").select("email").eq("email",o).single();return!n&&t},statusColor(o){return o==="resolvido"?"green":o==="em_andamento"?"orange":"red"}}},x={class:"max-w-4xl mx-auto px-6 py-12"},h={class:"bg-white rounded-2xl shadow-xl p-8"},y={key:0,class:"space-y-4"},w={class:"text-xl font-semibold"},_=["src"],v={class:"mt-6"},b=["href"],k={key:1};function C(o,t,n,d,r,p){return i(),a("div",x,[e("div",h,[t[8]||(t[8]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"📌 Detalhes da Denúncia",-1)),r.report?(i(),a("div",y,[e("h3",w,s(r.report.titulo),1),e("p",null,[t[1]||(t[1]=e("strong",null,"Status:",-1)),e("span",{style:m({color:p.statusColor(r.report.status)}),class:"font-medium"},s(r.report.status),5)]),e("p",null,[t[2]||(t[2]=e("strong",null,"Categoria:",-1)),l(" "+s(r.report.categoria),1)]),e("p",null,[t[3]||(t[3]=e("strong",null,"Descrição:",-1)),l(" "+s(r.report.descricao),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Localização:",-1)),l(" "+s(r.report.latitude)+", "+s(r.report.longitude),1)]),e("p",null,[t[5]||(t[5]=e("strong",null,"Data:",-1)),l(" "+s(new Date(r.report.created_at).toLocaleString("pt-BR")),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"Enviado por:",-1)),l(" "+s(r.report.email_usuario),1)]),r.report.url_foto?(i(),a("img",{key:0,src:r.report.url_foto,alt:"Foto da denúncia",class:"mt-4 rounded-lg max-w-full shadow-lg"},null,8,_)):g("",!0),e("div",v,[e("a",{href:`https://www.google.com/maps?q=${r.report.latitude},${r.report.longitude}`,target:"_blank",class:"text-blue-600 hover:underline"}," 📍 Ver localização no Google Maps ",8,b)])])):(i(),a("div",k,[...t[7]||(t[7]=[e("p",{class:"text-gray-600"},"Carregando... ou acesso negado.",-1)])])),e("button",{onClick:t[0]||(t[0]=D=>o.$router.back()),class:"mt-8 bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition"}," Voltar ")])])}const A=c(f,[["render",C],["__scopeId","data-v-2c8460e7"]]);export{A as default};
