import{_ as g,c,a as e,t as r,w as p,b as a,v as d,k as m,l as b,F as f,g as n,o as h}from"./index-Bqm-g8iD.js";import{_ as x}from"./favicon-Bhvs0SYa.js";const w={data(){return{user:null,titulo:"",categoria:"",descricao:"",url_foto:"",latitude:null,longitude:null}},async mounted(){const{data:l}=await n.auth.getUser();this.user=l.user,await this.getLocation()},methods:{async getLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(l=>{this.latitude=l.coords.latitude,this.longitude=l.coords.longitude},l=>console.error(l))},handleFileUpload(l){const t=l.target.files[0];t&&(this.url_foto=URL.createObjectURL(t))},async submit(){const{data:l,error:t}=await n.from("denuncia").insert({titulo:this.titulo,categoria:this.categoria,descricao:this.descricao,url_foto:this.url_foto,latitude:this.latitude,longitude:this.longitude,email_usuario:this.user.email,status:"registrado"});t?alert("Erro: "+t.message):this.$router.push("/home")},async handleLogout(){await n.auth.signOut(),this.$router.push("/login")}}},y={class:"bg-blue-800 text-white shadow-lg px-6 py-4 fixed top-0 left-0 right-0 z-50 flex items-center justify-between"},v={class:"flex items-center space-x-4"},S={class:"text-sm"},U={class:"min-h-screen bg-blue-900 pt-24 pb-8 px-6 text-white"},L={class:"text-right mb-6"},C={class:"max-w-lg mx-auto bg-white rounded-xl shadow p-6"},k={class:"text-sm text-gray-600"};function F(l,t,V,_,s,i){var u;return h(),c(f,null,[e("header",y,[t[7]||(t[7]=e("div",{class:"flex items-center"},[e("img",{src:x,alt:"Logo SOSJAC",class:"w-8 h-8 mr-3"}),e("h1",{class:"text-xl font-bold"},"SOSJAC")],-1)),t[8]||(t[8]=e("h2",{class:"text-lg font-semibold flex-1 text-center"},"üìù Registrar Den√∫ncia",-1)),e("div",v,[e("span",S,"Ol√°, "+r((u=s.user)==null?void 0:u.email),1),e("button",{onClick:t[0]||(t[0]=(...o)=>i.handleLogout&&i.handleLogout(...o)),class:"bg-red-600 hover:bg-red-500 text-white text-sm px-3 py-1 rounded-lg"}," Sair ")])]),e("main",U,[e("div",L,[e("button",{onClick:t[1]||(t[1]=o=>l.$router.back()),class:"flex items-center space-x-2 ml-auto px-6 py-3 bg-blue-700 hover:bg-blue-600 text-white rounded-xl shadow-lg transition-transform duration-200 transform hover:scale-105 font-semibold"},[...t[9]||(t[9]=[e("span",null,"‚Üê",-1),e("span",null,"Voltar",-1)])])]),e("div",C,[e("form",{onSubmit:t[6]||(t[6]=p((...o)=>i.submit&&i.submit(...o),["prevent"])),class:"space-y-4"},[a(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.titulo=o),type:"text",placeholder:"T√≠tulo",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white text-gray-800 placeholder-gray-500",required:""},null,512),[[d,s.titulo]]),a(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.categoria=o),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white text-gray-800",required:""},[...t[10]||(t[10]=[b('<option value="" disabled>Selecione uma categoria</option><option value="buraco">Buraco</option><option value="alagamento">Alagamento</option><option value="iluminacao">Ilumina√ß√£o</option><option value="entulho">Entulho</option>',5)])],512),[[m,s.categoria]]),a(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.descricao=o),placeholder:"Descri√ß√£o",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white text-gray-800 placeholder-gray-500",rows:"4",required:""},null,512),[[d,s.descricao]]),e("input",{type:"file",onChange:t[5]||(t[5]=(...o)=>i.handleFileUpload&&i.handleFileUpload(...o)),class:"w-full"},null,32),e("p",k,"Coordenadas: "+r(s.latitude)+", "+r(s.longitude),1),t[11]||(t[11]=e("button",{type:"submit",class:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold"}," Enviar Den√∫ncia ",-1))],32)])])],64)}const B=g(w,[["render",F]]);export{B as default};
